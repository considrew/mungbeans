<!DOCTYPE html>
<html lang="en">
<head>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5600315940410875"
     crossorigin="anonymous"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>mungbeans.io - 200-Week Moving Average Stock Signals</title>
  <meta name="description" content="Track when quality stocks drop below their 200-week moving average. Simple yes/no signals for value investors.">
  
  <!-- Open Graph -->
  <meta property="og:title" content="mungbeans.io - 200-Week MA Stock Signals">
  <meta property="og:description" content="Track when quality stocks drop below their 200-week moving average.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="{{ .Site.BaseURL }}">
  
  <!-- JSON-LD -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "mungbeans.io",
    "description": "Track when quality stocks drop below their 200-week moving average",
    "url": "{{ .Site.BaseURL }}"
  }
  </script>
  
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <header class="site-header">
    <nav>
      <a href="/" class="logo">mungbeans.io</a>
      <a href="/stocks/">All Stocks</a>
      <a href="/about/">About</a>
    </nav>
  </header>

  {{ $data := dict }}
  {{ with resources.Get "data/stocks.json" }}
    {{ with . | transform.Unmarshal }}
      {{ $data = . }}
    {{ end }}
  {{ end }}

  {{/* Filter and categorize stocks */}}
  {{ $allBelow := $data.summary.below_line_stocks }}
  
  {{/* Quality picks: -5% to -50% depth, excludes dying stocks */}}
  {{ $qualityPicks := slice }}
  {{ $deepValue := slice }}
  {{ $tooFarGone := slice }}
  
  {{ range $allBelow }}
    {{ $depth := math.Abs .pct_from_wma }}
    {{ if lt $depth 50.0 }}
      {{ $qualityPicks = $qualityPicks | append . }}
    {{ else if lt $depth 70.0 }}
      {{ $deepValue = $deepValue | append . }}
    {{ else }}
      {{ $tooFarGone = $tooFarGone | append . }}
    {{ end }}
  {{ end }}

  <main class="homepage">
    <!-- Hero Section -->
    <section class="hero">
      <h1>Below The Line</h1>
      <p class="tagline">Track when quality stocks touch their 200-week moving average.</p>
      
      <div class="hero-stats">
        <div class="stat">
          <span class="stat-number">{{ len $qualityPicks }}</span>
          <span class="stat-label">Actionable</span>
        </div>
        <div class="stat">
          <span class="stat-number">{{ $data.summary.approaching_count }}</span>
          <span class="stat-label">Approaching</span>
        </div>
        <div class="stat">
          <span class="stat-number">{{ $data.summary.total_stocks }}</span>
          <span class="stat-label">Tracked</span>
        </div>
      </div>
    </section>

    <!-- Ad Placement: After Hero -->
    <div class="ad-container ad-container--leaderboard" id="ad-home-top">
      <div class="ad-label">Advertisement</div>
    </div>

    <!-- Quality Picks: Actionable Below-Line Stocks -->
    {{ if $qualityPicks }}
    <section class="stock-section below-section">
      <h2>üìâ Below The Line</h2>
      <p class="section-desc">Stocks trading 5‚Äì50% below their 200-week moving average ‚Äî the actionable zone.</p>
      
      <div class="stock-grid">
        {{ range first 10 $qualityPicks }}
        <a href="/stocks/{{ .symbol | lower }}/" class="stock-card zone-{{ .zone }}">
          <div class="card-symbol">{{ .symbol }}</div>
          <div class="card-signal">YES</div>
          <div class="card-pct">{{ printf "%.1f%%" (math.Abs .pct_from_wma) }} below</div>
          <div class="card-direction">
            {{ if .approaching }}‚Üì Deepening{{ else }}‚Üë Recovering{{ end }}
          </div>
          {{ if lt .rsi_14 30.0 }}
          <div class="card-badge oversold">RSI {{ printf "%.0f" .rsi_14 }}</div>
          {{ end }}
          {{ if and .avg_return_after_touch (gt .avg_return_after_touch 0.0) }}
          <div class="card-badge history">+{{ printf "%.0f%%" .avg_return_after_touch }} avg</div>
          {{ end }}
        </a>
        {{ end }}
      </div>
      {{ if gt (len $qualityPicks) 10 }}
      <a href="/stocks/?filter=below" class="section-view-all">View all {{ len $qualityPicks }} below-the-line stocks ‚Üí</a>
      {{ end }}
    </section>
    {{ end }}

    <!-- Deep Value: 50-70% below -->
    {{ if $deepValue }}
    <section class="stock-section deep-value-section">
      <h2>üîª Deep Value (High Risk)</h2>
      <p class="section-desc">Stocks 50-70% below their 200WMA. Higher risk ‚Äî verify fundamentals carefully.</p>
      
      <div class="stock-grid">
        {{ range first 10 $deepValue }}
        <a href="/stocks/{{ .symbol | lower }}/" class="stock-card zone-{{ .zone }}">
          <div class="card-symbol">{{ .symbol }}</div>
          <div class="card-signal">YES</div>
          <div class="card-pct">{{ printf "%.1f%%" (math.Abs .pct_from_wma) }} below</div>
          <div class="card-direction">
            {{ if .approaching }}‚Üì Deepening{{ else }}‚Üë Recovering{{ end }}
          </div>
          {{ if lt .rsi_14 30.0 }}
          <div class="card-badge oversold">RSI {{ printf "%.0f" .rsi_14 }}</div>
          {{ end }}
        </a>
        {{ end }}
      </div>
      {{ if gt (len $deepValue) 10 }}
      <a href="/stocks/?filter=deep-value" class="section-view-all">View all {{ len $deepValue }} deep value stocks ‚Üí</a>
      {{ end }}
    </section>
    {{ end }}

    <!-- The Waiting Room - Approaching Stocks -->
    {{ if $data.summary.approaching_stocks }}
    <section class="stock-section approaching-section">
      <h2>‚è≥ The Waiting Room</h2>
      <p class="section-desc">Stocks within 15% of their 200-week line, sorted by proximity.</p>
      
      <div class="stock-grid">
        {{ range first 10 $data.summary.approaching_stocks }}
        <a href="/stocks/{{ .symbol | lower }}/" class="stock-card zone-{{ .zone }}">
          <div class="card-symbol">{{ .symbol }}</div>
          <div class="card-signal">NO</div>
          <div class="card-pct">{{ printf "%.1f%%" .pct_from_wma }} above</div>
          <div class="card-direction">
            {{ if .approaching }}‚Üì Approaching{{ else }}‚Üë Moving away{{ end }}
          </div>
          {{ if lt .rsi_14 30.0 }}
          <div class="card-badge oversold">RSI {{ printf "%.0f" .rsi_14 }}</div>
          {{ end }}
        </a>
        {{ end }}
      </div>
      {{ if gt (len $data.summary.approaching_stocks) 10 }}
      <a href="/stocks/?filter=approaching" class="section-view-all">View all {{ len $data.summary.approaching_stocks }} approaching stocks ‚Üí</a>
      {{ end }}
    </section>
    {{ end }}

    <!-- Oversold Stocks (from quality picks only) -->
    {{ $oversoldQuality := slice }}
    {{ range $qualityPicks }}
      {{ if lt .rsi_14 30.0 }}
        {{ $oversoldQuality = $oversoldQuality | append . }}
      {{ end }}
    {{ end }}
    
    {{ if $oversoldQuality }}
    <section class="stock-section oversold-section">
      <h2>üìä Oversold + Below Line</h2>
      <p class="section-desc">Below-line stocks also showing RSI &lt; 30. Double signal.</p>
      
      <div class="stock-grid">
        {{ range first 10 $oversoldQuality }}
        <a href="/stocks/{{ .symbol | lower }}/" class="stock-card zone-{{ .zone }}">
          <div class="card-symbol">{{ .symbol }}</div>
          <div class="card-signal">YES</div>
          <div class="card-pct">{{ printf "%.1f%%" (math.Abs .pct_from_wma) }} below</div>
          <div class="card-badge oversold">RSI {{ printf "%.0f" .rsi_14 }}</div>
        </a>
        {{ end }}
      </div>
      {{ if gt (len $oversoldQuality) 10 }}
      <a href="/stocks/?filter=oversold" class="section-view-all">View all {{ len $oversoldQuality }} oversold stocks ‚Üí</a>
      {{ end }}
    </section>
    {{ end }}

    <!-- Too Far Gone (collapsed/hidden by default) -->
    {{ if $tooFarGone }}
    <section class="stock-section distressed-section">
      <details>
        <summary>
          <h2 style="display:inline;">‚ö†Ô∏è Distressed ({{ len $tooFarGone }} stocks &gt;70% below)</h2>
        </summary>
        <p class="section-desc">These stocks are more than 70% below their 200WMA. Many may be facing serious fundamental issues.</p>
        
        <div class="stock-grid">
          {{ range first 10 $tooFarGone }}
          <a href="/stocks/{{ .symbol | lower }}/" class="stock-card zone-{{ .zone }}">
            <div class="card-symbol">{{ .symbol }}</div>
            <div class="card-signal">YES</div>
            <div class="card-pct">{{ printf "%.1f%%" (math.Abs .pct_from_wma) }} below</div>
          </a>
          {{ end }}
        </div>
        {{ if gt (len $tooFarGone) 10 }}
        <a href="/stocks/?filter=distressed" class="section-view-all">View all {{ len $tooFarGone }} distressed stocks ‚Üí</a>
        {{ end }}
      </details>
    </section>
    {{ end }}

    <!-- Methodology -->
    <section class="methodology">
      <h2>The Methodology</h2>
      <p>
        The 200-week moving average represents roughly 4 years of price history. 
        When a quality stock drops to this level, it often represents a significant 
        buying opportunity‚Äîthe kind that comes along only a handful of times per decade 
        for any given company.
      </p>
      <p>
        This tool tracks two simple things:
      </p>
      <ol>
        <li><strong>Is the stock below its 200-week moving average?</strong> Yes or no.</li>
        <li><strong>Is it approaching or retreating?</strong> Week-over-week direction.</li>
      </ol>
      <p>
        We also show 14-week RSI as a short-term oversold indicator, and historical data 
        on what happened after previous touches.
      </p>
      <p class="methodology-note">
        <strong>This is not financial advice.</strong> A stock being below its 200-week 
        average could mean opportunity‚Äîor it could mean the business is deteriorating. 
        Always do your own research.
      </p>
    </section>

    <!-- All Stocks Link -->
    <section class="all-stocks-cta">
      <!-- Email Signup -->
      <section class="email-signup">
        <h2>üì¨ Get Notified</h2>
        <p>Get a weekly email when stocks cross below their 200-week line.</p>
        <form name="notify" method="POST" action="/thanks/" data-netlify="true" netlify-honeypot="bot-field" class="signup-form">
          <input type="hidden" name="form-name" value="notify">
          <p class="hidden" style="display:none;">
            <label>Don't fill this out: <input name="bot-field"></label>
          </p>
          <input type="email" name="email" placeholder="you@example.com" required>
          <button type="submit">Subscribe</button>
        </form>
        <p class="signup-note">No spam. Unsubscribe anytime.</p>
      </section>
      <a href="/stocks/" class="cta-button">View All {{ $data.summary.total_stocks }} Stocks ‚Üí</a>
    </section>
  </main>

  <footer class="site-footer">
    <p>Data updated weekly (Friday close). Last update: {{ $data.generated_readable }}</p>
    <p>¬© {{ now.Year }} Below The Line. <a href="/disclaimer/">Disclaimer</a> ¬∑ <a href="/privacy/">Privacy</a></p>
  </footer>

  <style>
    .deep-value-section .stock-card {
      border-color: var(--color-warning, #f59e0b);
    }
    
    .distressed-section {
      opacity: 0.7;
    }
    
    .distressed-section details {
      cursor: pointer;
    }
    
    .distressed-section summary {
      padding: var(--space-md);
      background: var(--color-surface);
      border-radius: var(--radius-md);
      margin-bottom: var(--space-md);
    }
    
    .distressed-section summary:hover {
      background: var(--color-border);
    }
    
    .card-badge.history {
      background: var(--color-success-bg, #dcfce7);
      color: var(--color-success, #16a34a);
    }
  </style>
</body>
</html>
